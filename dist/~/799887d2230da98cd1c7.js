(self.webpackChunkzbar_qr_demo=self.webpackChunkzbar_qr_demo||[]).push([[741],{741:(a,e,t)=>{"use strict";t.r(e),t.d(e,{default:()=>d});const n={template:'<div class="d-inline-block" v-if="id"><b-form-file :id="id" placeholder="請選擇檔案..." @change="parseFile" accept=".jpg, .png" plain style="display:none;"></b-form-file><label class="btn btn-secondary btn-sm" :for="id"><b-icon-card-image></b-icon-card-image></label></div>',props:[],data:function(){return{id:""}},mounted:function(){this.id=`img-${this._uid}`},methods:{parseFile:function(a){const e=this,t=a.srcElement,n=t.files[0];t.value="";const i=new window.FileReader;i.addEventListener("load",(function(){const a=i.result,t=new window.Image;t.onload=function(){const{width:n,height:i}=this;Object.assign(e,{width:n,height:i,url:a}),e.$emit("load",t,e)},t.src=a}),!1),n&&i.readAsDataURL(n)}}};var i=t(832),s=t.n(i);const d={template:'<div class="container-fluid px-0"><nav class="navbar navbar-dark bg-dark"><div class="navbar-brand d-flex"><div>zbar-qr-demo</div><open-image class="ml-1" @load="scan"></open-image></div></nav><div class="container-fluid"><b-card no-body><b-card-header header-tag="nav"><b-nav class="mb-1" card-header tabs><b-nav-item :active="tabIndex===\'image\'" @click="tabIndex=\'image\'">圖片</b-nav-item><b-nav-item v-if="result" :active="tabIndex===\'result\'" @click="tabIndex=\'result\'">結果</b-nav-item></b-nav></b-card-header><b-card-body v-show="tabIndex===\'image\'"><div class="d-flex align-items-center justify-content-around mt-2"><canvas class="w-50" ref="canvas"></canvas><canvas class="w-50" ref="qrcode"></canvas></div></b-card-body><b-card-body v-if="tabIndex===\'result\'"><pre>{{result}}</pre></b-card-body></b-card></div></div>',components:{"open-image":n},data:()=>({tabIndex:"image",result:""}),methods:{scan:async function(a){const e=this.$refs.canvas,{width:t,height:n}=a;Object.assign(e,{width:t,height:n});const i=await window.createImageBitmap(a),d=e.getContext("2d");d.drawImage(i,0,0,t,n);const r=d.getImageData(0,0,t,n),c=await s()(r);this.result=JSON.stringify(c,null,4);const o=c.shift();if(!o)return;const l=this.$refs.qrcode,b=o.loc,m=512,v=512;Object.assign(l,{width:m,height:v});const h=l.getContext("2d"),u=h.createImageData(m,v),f=(b[3].x-b[0].x)/m,g=(b[1].x-b[0].x)/v,p=(b[2].x+b[0].x-b[3].x-b[1].x)/(m*v),w=b[0].x,x=(b[3].y-b[0].y)/m,y=(b[1].y-b[0].y)/v,I=(b[2].y+b[0].y-b[3].y-b[1].y)/(m*v),k=b[0].y;for(let a=0;a<v;a++)for(let e=0;e<m;e++){const n=4*(a*m+e),i=parseInt(f*e+g*a+p*e*a+w),s=4*(parseInt(x*e+y*a+I*e*a+k)*t+i);u.data[n]=r.data[s],u.data[n+1]=r.data[s+1],u.data[n+2]=r.data[s+2],u.data[n+3]=r.data[s+3]}h.putImageData(u,0,0)}}}},832:(a,e,t)=>{let n=function(){return Promise.reject(new Error("server side render not support"))};new Function("try {return this===window;}catch(e){ return false;}")()&&(n=t(650)),a.exports=n}}]);